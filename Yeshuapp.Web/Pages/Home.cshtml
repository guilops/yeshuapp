@page
@model HomeModel
@{
    ViewData["Title"] = "Casa de Oração Yeshua";
    var frase = Model.Frases?.OrderBy(_ => Guid.NewGuid()).FirstOrDefault();
}

@if (!string.IsNullOrEmpty(Model.Saudacao))
{
    <h4 style="font-family: 'Merriweather', serif; font-size: 1.25rem; font-weight: 500; color: #2C3E50;">
        @Model.Saudacao
    </h4>
}

<div class="text-center">
    <br />
    @if (frase != null)
    {
        <blockquote class="blockquote" style="margin-bottom: 1.2rem;">
            <p class="mb-0">"@frase.Passagem"</p>
            <p>
                <footer class="blockquote-footer">"@frase.Livro - @frase.Capitulo, @frase.Versiculo"</footer>
            </p>
        </blockquote>
    }

    <div class="eventos-section" style="margin-top:2rem;">
        <h3 class="mb-4" style="font-weight:600; color:#2c3e50;">Próximos Eventos</h3>
        <div class="row justify-content-center">
            @if (Model.Eventos != null && Model.Eventos.Any())
            {
                @foreach (var evento in Model.Eventos.Where(e => DateTime.Parse(e.Data) >= DateTime.Now).OrderBy(e => DateTime.Parse(e.Data)))
                {
                    <div class="col-md-4 mb-4">
                        <div class="card shadow-sm h-100 border-primary">
                            <div class="card-header bg-primary text-white">
                                <span style="font-size:1.1rem; font-weight:500;">@evento.Descricao</span>
                            </div>
                            <div class="card-body">
                                <p class="card-text mb-2">
                                    <i class="bi bi-calendar-event"></i>
                                    <strong> Data:</strong> @DateTime.Parse(evento.Data).ToString("dd/MM/yyyy")
                                    <br />
                                    <i class="bi bi-clock"></i>
                                    <strong> Horário:</strong> @evento.Horario
                                </p>
                                @if (!string.IsNullOrEmpty(evento.Detalhes))
                                {
                                    <p class="card-text text-muted">@evento.Detalhes</p>
                                }
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <p class="text-muted">Nenhum próximo evento.</p>
                </div>
            }
        </div>
    </div>